<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moneyball Draft Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(180deg, #2563eb 0%, #1e40af 100%);
            min-height: 100vh;
            padding: 15px;
            color: white;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .baseball {
            font-size: 2.5rem;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .mission-box {
            background: rgba(255,255,255,0.15);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .highlight {
            background: #fbbf24;
            color: #1a1a1a;
            padding: 2px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .budget-bar {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .budget-item {
            text-align: center;
        }

        .budget-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .budget-value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .money-left { color: #4ade80; }
        .money-tight { color: #fbbf24; }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .player-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            border: 4px solid transparent;
        }

        .player-card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .player-card.selected {
            border-color: #22c55e;
            background: #dcfce7;
            transform: scale(1.03);
        }

        .player-card.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .player-avatar {
            font-size: 3rem;
            margin-bottom: 5px;
        }

        .player-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 10px;
        }

        .player-stat {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 0.95rem;
            border-bottom: 1px solid #eee;
        }

        .player-stat:last-child {
            border-bottom: none;
        }

        .stat-name {
            color: #666;
        }

        .stat-val {
            font-weight: bold;
            color: #333;
        }

        .stars {
            color: #f59e0b;
        }

        .price-tag {
            background: #ef4444;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1rem;
            margin-top: 10px;
            display: inline-block;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .draft-btn {
            background: #22c55e;
            color: white;
            font-size: 1.2rem;
        }

        .draft-btn:hover:not(:disabled) {
            background: #16a34a;
            transform: scale(1.05);
        }

        .draft-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .reset-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
        }

        .reset-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .hint-btn {
            background: #fbbf24;
            color: #1a1a1a;
        }

        .hint-btn:hover {
            background: #f59e0b;
        }

        .hint-box {
            display: none;
            background: #fef3c7;
            color: #92400e;
            border-radius: 15px;
            padding: 15px 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1rem;
        }

        .hint-box.show {
            display: block;
        }

        /* Result Popup */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .popup.show {
            display: flex;
        }

        .popup-content {
            background: white;
            color: #333;
            border-radius: 20px;
            padding: 30px;
            max-width: 450px;
            width: 100%;
            text-align: center;
            animation: popIn 0.4s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .popup-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .popup-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .popup-title.win { color: #22c55e; }
        .popup-title.close { color: #f59e0b; }
        .popup-title.retry { color: #ef4444; }

        .popup-message {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .claim-code-box {
            background: linear-gradient(145deg, #22c55e, #16a34a);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .claim-code-label {
            font-size: 0.9rem;
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .claim-code {
            font-size: 1.5rem;
            font-weight: bold;
            background: white;
            color: #22c55e;
            padding: 10px 20px;
            border-radius: 10px;
            letter-spacing: 2px;
            font-family: monospace;
        }

        .lesson-box {
            background: #f0f9ff;
            border: 2px solid #2563eb;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .lesson-box h3 {
            color: #2563eb;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .lesson-box p {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .popup-btn {
            background: #2563eb;
            color: white;
            margin-top: 15px;
        }

        .popup-btn:hover {
            background: #1e40af;
        }

        @media (max-width: 500px) {
            h1 { font-size: 1.5rem; }
            .budget-value { font-size: 1.4rem; }
            .player-card { padding: 12px; }
            .player-name { font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="baseball">&#9918;</div>
            <h1>Moneyball Draft Challenge</h1>
        </header>

        <div class="mission-box">
            You're the team manager! Pick <span class="highlight">2 players</span> to join your team.<br>
            You only have <span class="highlight">$25 million</span> to spend. Choose wisely!
        </div>

        <div class="budget-bar">
            <div class="budget-item">
                <div class="budget-label">Your Budget</div>
                <div class="budget-value">$25M</div>
            </div>
            <div class="budget-item">
                <div class="budget-label">Money Spent</div>
                <div class="budget-value money-left" id="spent">$0M</div>
            </div>
            <div class="budget-item">
                <div class="budget-label">Players Picked</div>
                <div class="budget-value" id="picked">0 / 2</div>
            </div>
        </div>

        <div class="players-grid" id="players-grid"></div>

        <div class="buttons">
            <button class="hint-btn" onclick="toggleHint()">Need a Hint?</button>
            <button class="draft-btn" id="draft-btn" disabled onclick="checkAnswer()">Draft My Team!</button>
            <button class="reset-btn" onclick="resetGame()">Start Over</button>
        </div>

        <div class="hint-box" id="hint-box">
            <strong>Hint:</strong> Stars and home runs look cool, but smart managers look at <strong>OBP</strong> (how often a player gets on base). A cheaper player who gets on base a lot might be a better deal!
        </div>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content" id="popup-content"></div>
    </div>

    <script>
        const players = [
            { id: 'A', obp: 0.310, hr: 25, salary: 13, stars: 4, note: 'Fan favorite!' },
            { id: 'B', obp: 0.365, hr: 10, salary: 7, stars: 2, note: 'Quiet but smart' },
            { id: 'C', obp: 0.400, hr: 8, salary: 6, stars: 0, note: 'Gets on base a lot' },
            { id: 'D', obp: 0.335, hr: 18, salary: 9, stars: 3, note: 'Good all-around' },
            { id: 'E', obp: 0.345, hr: 15, salary: 11, stars: 2, note: 'Rising star' }
        ];

        const avatars = ['&#9917;', '&#127936;', '&#129358;', '&#127952;', '&#127941;'];
        const BUDGET = 25;
        let selected = [];

        function renderPlayers() {
            const grid = document.getElementById('players-grid');
            grid.innerHTML = players.map((p, i) => `
                <div class="player-card" id="card-${p.id}" onclick="pickPlayer('${p.id}')">
                    <div class="player-avatar">${avatars[i]}</div>
                    <div class="player-name">Player ${p.id}</div>
                    <div class="player-stat">
                        <span class="stat-name">OBP</span>
                        <span class="stat-val">${p.obp.toFixed(3)}</span>
                    </div>
                    <div class="player-stat">
                        <span class="stat-name">Home Runs</span>
                        <span class="stat-val">${p.hr}</span>
                    </div>
                    <div class="player-stat">
                        <span class="stat-name">Popularity</span>
                        <span class="stat-val stars">${p.stars > 0 ? '&#11088;'.repeat(p.stars) : 'None'}</span>
                    </div>
                    <div class="price-tag">$${p.salary}M</div>
                </div>
            `).join('');
        }

        function getSpent() {
            return selected.reduce((sum, id) => sum + players.find(p => p.id === id).salary, 0);
        }

        function pickPlayer(id) {
            const card = document.getElementById(`card-${id}`);
            if (card.classList.contains('disabled')) return;

            const player = players.find(p => p.id === id);

            if (selected.includes(id)) {
                selected = selected.filter(x => x !== id);
                card.classList.remove('selected');
            } else if (selected.length < 2 && getSpent() + player.salary <= BUDGET) {
                selected.push(id);
                card.classList.add('selected');
            }

            updateDisplay();
        }

        function updateDisplay() {
            const spent = getSpent();
            document.getElementById('spent').textContent = `$${spent}M`;
            document.getElementById('picked').textContent = `${selected.length} / 2`;

            const spentEl = document.getElementById('spent');
            spentEl.className = spent > 20 ? 'budget-value money-tight' : 'budget-value money-left';

            players.forEach(p => {
                const card = document.getElementById(`card-${p.id}`);
                if (!selected.includes(p.id)) {
                    if (selected.length >= 2 || spent + p.salary > BUDGET) {
                        card.classList.add('disabled');
                    } else {
                        card.classList.remove('disabled');
                    }
                }
            });

            document.getElementById('draft-btn').disabled = selected.length !== 2;
        }

        function toggleHint() {
            document.getElementById('hint-box').classList.toggle('show');
        }

        function checkAnswer() {
            const isWinner = selected.includes('B') && selected.includes('C');
            const hasOneGood = selected.includes('B') || selected.includes('C');

            let html = '';

            if (isWinner) {
                html = `
                    <div class="popup-icon">&#127942;</div>
                    <h2 class="popup-title win">You Did It!</h2>
                    <p class="popup-message">Amazing! You found the hidden gems! Players B and C don't have many stars, but they get on base the most for the lowest price. That's smart thinking!</p>
                    <div class="claim-code-box">
                        <div class="claim-code-label">Your Claim Code:</div>
                        <div class="claim-code">101-M3-L1-MONEYBALL</div>
                    </div>
                    <div class="lesson-box">
                        <h3>&#128161; What You Learned</h3>
                        <p>In Moneyball, the best players aren't always the most popular. By looking at the <strong>data</strong> (OBP), you found players that other teams missed!</p>
                    </div>
                    <button class="popup-btn" onclick="closePopup()">Play Again</button>
                `;
            } else if (hasOneGood) {
                html = `
                    <div class="popup-icon">&#128170;</div>
                    <h2 class="popup-title close">So Close!</h2>
                    <p class="popup-message">Good job picking ${selected.includes('B') ? 'Player B' : 'Player C'}! But there's an even better combo. Look for players with HIGH OBP and LOW price!</p>
                    <div class="lesson-box">
                        <h3>&#128161; Tip</h3>
                        <p>Stars and home runs are exciting, but OBP tells you how often a player helps the team. Try again!</p>
                    </div>
                    <button class="popup-btn" onclick="closePopup()">Try Again</button>
                `;
            } else {
                html = `
                    <div class="popup-icon">&#129300;</div>
                    <h2 class="popup-title retry">Not Quite!</h2>
                    <p class="popup-message">You picked the popular players, but are they the best deal? Look at the OBP numbers - who gets on base the most for the cheapest price?</p>
                    <div class="lesson-box">
                        <h3>&#128161; Tip</h3>
                        <p>Don't be fooled by stars! A player with a high OBP and low price is a hidden treasure!</p>
                    </div>
                    <button class="popup-btn" onclick="closePopup()">Try Again</button>
                `;
            }

            document.getElementById('popup-content').innerHTML = html;
            document.getElementById('popup').classList.add('show');
        }

        function closePopup() {
            document.getElementById('popup').classList.remove('show');
            resetGame();
        }

        function resetGame() {
            selected = [];
            document.querySelectorAll('.player-card').forEach(c => c.classList.remove('selected', 'disabled'));
            document.getElementById('hint-box').classList.remove('show');
            updateDisplay();
        }

        renderPlayers();
        updateDisplay();
    </script>
</body>
</html>
